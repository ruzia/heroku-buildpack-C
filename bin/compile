#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>
set -e

BUILD_DIR=$1
CACHE_DIR=$2
LP_DIR=`cd $(dirname $0); cd ..; pwd`

cd $BUILD_DIR
autogen_file="autogen.sh"
configure_file="configure.ac"
if [ -f $autogen_file ]
then
    echo "-----> autogen found"
else
    echo "-----> No autogen found.Compilation cannot continue."
    exit 1;
fi
if [ -f $configure_file ]
then
    echo "-----> configure found"
else
    echo "-----> No configure found.Compilation cannot continue."
    exit 1;
fi

./autogen.sh
./configure
make
echo "-----> Compilation done"
